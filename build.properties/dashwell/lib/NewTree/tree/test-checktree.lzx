<canvas debug="true">
    <include href="checktree/library.lzx" />
    
    <dataset name="flatDS">
        <root>
            <node name="Libraries" __OPTTREE_META_open="true">
                <node name="Performance" __OPTTREE_META_open="true">
                    <node name="Turbo-booster pack" _checked="true" />
                    <node name="Compiler optimizer" _checked="false"  />
                </node>
                <node name="Language">
                    <node name="English" />
                    <node name="French" />
                    <node name="Spanish" />
                </node>
            </node>
            <node name="Applications">
                <node name="Writing">
                    <node name="Word" />
                    <node name="WordPerfect" />
                </node>
                <node name="Drawing">
                    <node name="Photoshop" />
                    <node name="Illustrator" />
                    <node name="Quark" />
                </node>
                <node name="Emailing" />
            </node>
        </root>
    </dataset>


    <window x="20" y="20" width="220" height="200"
            resizable="true">
      <view width="200" height="100" clip="true">
        <checktree id="main" datapath="flatDS:/root"
                   nodepath="node" nodeclass="checktreenode"
                   width="${immediateparent.width-15}">
        </checktree>
        <scrollbar />
      </view>
    </window>


    <!-- Test harness -->
    <window x="260" y="20" width="240">
        <simplelayout axis="y" spacing="10" />
        <text width="100%" multiline="true">
            <b>oncheck</b> Sent when any leaf is checked or unchecked, in
            addition to the two events below.
        </text>

        <method event="oncheck" reference="main" 
                args="xmlNode">
            <![CDATA[
                Debug.write( ">> ONCHECK SENT: ", xmlNode );
            ]]>
        </method>

        <text width="100%" multiline="true">
            <b>oncheckselect</b> Sent when any leaf is checked.
        </text>

        <method event="oncheckselect" reference="main" 
                args="xmlNode">
            <![CDATA[
                Debug.write( ">> ONCHECKSELECT SENT: ", xmlNode );
            ]]>
        </method>

        <text width="100%" multiline="true">
            <b>oncheckdeselect</b> Sent when any leaf is un-checked.
        </text>

        <method event="oncheckdeselect" reference="main" 
                args="xmlNode">
            <![CDATA[
                Debug.write( ">> ONCHECKDESELECT SENT: ", xmlNode );
            ]]>
        </method>

        <text width="100%" multiline="true">
            <b>getAllCheckedNodes()</b>: Return a list of currently-checked 
            LzDataElements. Click button below:
        </text>

        <button align="center">getAllCheckedNodes()
            <method event="onclick">
                var sel = main.getAllCheckedNodes();
                Debug.write(sel);
            </method>
        </button>

        <text width="100%" multiline="true">
            <b>clearAll()</b>: Uncheck the entire tree.
        </text>

        <button align="center">clearAll()
            <method event="onclick">
                main.clearAll();
            </method>
        </button>

        <text width="100%" multiline="true">
            <b>checkAll()</b>: Check the entire tree.
        </text>

        <button align="center">checkAll()
            <method event="onclick">
                main.checkAll();
            </method>
        </button>
    </window>
</canvas>
