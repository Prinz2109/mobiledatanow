<canvas debug="true">
    <include href="dragtree/library.lzx"/>
    <dragtreefloater id="floater"
                     _dragtreeref="$once{main}" />
    <dataset name="dsFlat">
        <root>
            <node name="Fruits" _dragtarget="true"
                  __OPTTREE_META_open="true">
                <node name="Apples" _draggable="true">
                    <node name="Granny Smith" price="0.89" _draggable="true" />
                    <node name="Fuji" price="1.29" _draggable="true" />
                    <node name="Golden Delicious" price="0.89" _draggable="true" />
                </node>
                <node name="Peppers" price="1.39" _draggable="true" />
                <node name="Oranges" price="1.39" _draggable="true" />
                <node name="Pears" price="0.59" _draggable="true" />
            </node>
            <node name="Vegetables" _dragtarget="true">
                <node name="Carrots" price="0.25" />
                <node name="Potatoes">
                    <node name="Jersey Potatoes" price="0.99" />
                    <node name="Idaho Potatoes" price="0.69" />
                    <node name="King Edward Potatoes" price="1.29" />
                </node>
            </node>
            <node name="Shopping List" _dragtarget="true">
                <node name="Loo Paper" price="0.99" />
            </node>
            <node name="Zeta" _dragtarget="true">
            </node>
        </root>
  </dataset>
   <dataset name="dsFlat2">
        <root>
            <node name="Fruits" _dragtarget="true"
                  __OPTTREE_META_open="true">
                <node name="Apples" _draggable="true">
                    <node name="Granny Smith" price="0.89" _draggable="true" />
                    <node name="Fuji" price="1.29" _draggable="true" />
                    <node name="Golden Delicious" price="0.89" _draggable="true" />
                </node>
                <node name="Peppers" price="1.39" _draggable="true" />
                <node name="Oranges" price="1.39" _draggable="true" />
                <node name="Pears" price="0.59" _draggable="true" />
            </node>
            <node name="Vegetables" _dragtarget="true">
                <node name="Carrots" price="0.25" />
                <node name="Potatoes">
                    <node name="Jersey Potatoes" price="0.99" />
                    <node name="Idaho Potatoes" price="0.69" />
                    <node name="King Edward Potatoes" price="1.29" />
                </node>
            </node>
            <node name="Shopping List" _dragtarget="true">
                <node name="Loo Paper" price="0.99" />
            </node>
            <node name="Zeta" _dragtarget="true">
            </node>
        </root>
  </dataset>
   <dataset name="dsFlat3">
        <root>
            <node name="Fruits" _dragtarget="true"
                  __OPTTREE_META_open="true">
                <node name="Apples" _draggable="true">
                    <node name="Granny Smith" price="0.89" _draggable="true" />
                    <node name="Fuji" price="1.29" _draggable="true" />
                    <node name="Golden Delicious" price="0.89" _draggable="true" />
                </node>
                <node name="Peppers" price="1.39" _draggable="true" />
                <node name="Oranges" price="1.39" _draggable="true" />
                <node name="Pears" price="0.59" _draggable="true" />
            </node>
            <node name="Vegetables" _dragtarget="true">
                <node name="Carrots" price="0.25" />
                <node name="Potatoes">
                    <node name="Jersey Potatoes" price="0.99" />
                    <node name="Idaho Potatoes" price="0.69" />
                    <node name="King Edward Potatoes" price="1.29" />
                </node>
            </node>
            <node name="Shopping List" _dragtarget="true">
                <node name="Loo Paper" price="0.99" />
            </node>
            <node name="Zeta" _dragtarget="true">
            </node>
        </root>
  </dataset>
  <class name="navigation" extends="tabslider" 
         width="350" x="10" y="10"
             height="300"
             spacing="2" slideduration="300">
    <handler name="oninit">
        select(this.t1);
    </handler>
    <tabelement name="t1" text="Tabelement One" >
        <method name="openned">
            super.openned();
            Debug.write("last select node in tree [main] -- ");
            //set lock to false, so that the null value wont set to main.currselnode
            main.setAttribute("lock",false);
            main.select(null);
            //set back the previous selected
            main.setAttribute("lock",true);
            main.select(main.getAttribute("currselnode"));

            if(main.getAttribute("currselnode") != undefined){
                Debug.write(main.getAttribute("currselnode"));
            }else{
                Debug.write("there is no treenode been selected in tree [main] yet");
            }
        </method>
        <dragtree id="main" datapath="dsFlat:/root"
                nodepath="node" nodeclass="dragtreenode"
                floaterref="$once{floater}"
                multiselect="true"
                width="100%">
            <attribute name="currselnode" />
            <attribute name="lock" type="boolean" value="true" />
            <method name="updateHierarchy" args="p">
            </method>
            <handler name="onselect" args="s">
                Debug.write("select node in tree [main] -- ");
                Debug.write(s);
                if(lock){
                this.setAttribute("currselnode", s)
                }
            </handler>
        </dragtree>
    </tabelement>
    <tabelement text="Tabelement Two">
         <method name="openned">
            super.openned();
            Debug.write("last select node in tree [main2] -- ");
            if(main2.getAttribute("currselnode") != undefined){
                Debug.write(main2.getAttribute("currselnode"));
            }else{
                Debug.write("there is no treenode been selected in tree [main2] yet");
            }
        </method>
        <dragtree id="main2" datapath="dsFlat2:/root"
                nodepath="node" nodeclass="dragtreenode"
                floaterref="$once{floater}"
                multiselect="true"
                width="100%">
            <attribute name="currselnode" />
            <method name="updateHierarchy" args="p">
            </method>
            <handler name="onselect" args="s">
                Debug.write("select node in tree [main2] -- ");
                Debug.write(s);
                this.setAttribute("currselnode", s)
            </handler>
        </dragtree>
    </tabelement>
    <tabelement text="Tabelement Three">
         <method name="openned">
            super.openned();
            Debug.write("last select node in tree [main3] -- ");
            if(main3.getAttribute("currselnode") != undefined){
                Debug.write(main3.getAttribute("currselnode"));
            }else{
                Debug.write("there is no treenode been selected in tree [main3] yet");
            }
        </method>
        <dragtree id="main3" datapath="dsFlat3:/root"
                nodepath="node" nodeclass="dragtreenode"
                floaterref="$once{floater}"
                multiselect="true"
                width="100%">
            <attribute name="currselnode" />
            <method name="updateHierarchy" args="p">
            </method>
            <handler name="onselect" args="s">
                Debug.write("select node in tree [main3] -- ");
                Debug.write(s);
                this.setAttribute("currselnode", s)
            </handler>
        </dragtree>
    </tabelement>
  </class>
  <navigation/>
</canvas>

