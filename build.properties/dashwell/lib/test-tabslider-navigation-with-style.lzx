<canvas debug="true">

    <!-- All styles below. -->
    <silverstyle name="silvercolors"/>
    <greenstyle name="greencolors"/>
    <bluestyle name="bluecolors"/>
    <goldstyle name="goldcolors" isdefault="true"/>
    <whitestyle name="whitecolors"/>
    <purplestyle name="purplecolors"/>

    <class name="testview"
          width="300" height="180">
        <attribute name="top_pad" value="0" type="number" />

        <!-- helper method to print event -->
        <method name="printEvent" args="o,e">
            Debug.write(o.parent.name+'.'+o.name+'.'+e);
        </method>

        <simplelayout axis="y" />
        <!-- spacer to push remaining objects down to achive overlapping -->
        <view name="_top_pad" height="${classroot.top_pad}" />

        <button name="mybutton"
                x="5" y="15"
                text="${this.name}">

            <handler name="onclick">
                classroot.printEvent(this,'onclick');
            </handler>

            <handler name="omouseover">
                classroot.printEvent(this,'onmouseover');
            </handler>
        </button>

        <combobox name="mycombobox"
                  x="5" y="20"
                  width="130" editable="false">

            <handler name="onvalue">
                classroot.printEvent(this,'onvalue');
            </handler>
            <handler name="omouseover">
                classroot.printEvent(this,'onmouseover');
            </handler>

            <textlistitem text="One_1"  value="0x000055"/>
            <textlistitem text="One_2"  value="0x66dddd"/>
            <textlistitem text="One_3" value="0xaaddff"/>
        </combobox>

        <edittext name="myedittext" text="hello"
                  width="200">

            <handler name="onvalue">
                classroot.printEvent(this,'onvalue');
            </handler>

            <handler name="omouseover">
                classroot.printEvent(this,'onmouseover');
            </handler>

        </edittext>
    </class>


    <window name="mywin" title="Test overlapping views (click any tab element and mouseover the blank area of colored view OR select 'White' style to see the difference)"
            clickable="false" resizable="true">
        <simplelayout axis="x"
                      spacing="10" />

        <view name="styleview">
            <simplelayout axis="x" spacing="5"/>
            <text>Select a style:</text>
            <combobox width="120" editable="false">
                <method event="onselect">
                    var colorchoice = this.getValue();
                    canvas[colorchoice+'colors'].setAttribute("isdefault", true);
                </method>
                
                <textlistitem text="Silver" value="'silver'"/>
                <textlistitem text="Green" value="'green'"/>
                <textlistitem text="Blue" value="'blue'" />
                <textlistitem text="Gold" value="'gold'"/>
                <textlistitem text="White" value="'white'"/>
                <textlistitem text="Purple" value="'purple'"/>
            </combobox>
        </view>

        <tabslider name="maintabslider" x="10" y="10"
                   width="150" height="200"
                   spacing="2" slideduration="300">
    
            <method name="togglestate" args="viewprefix">
                Debug.write("togglestate() | viewprefix="+viewprefix);

                parent.afterview.setAttribute("toggledstate",viewprefix);
                parent.beforeview.setAttribute("toggledstate",viewprefix);
            </method>
    
            <tabelement name="onetabelement" text="Tabelement One">
                <handler name="onselected">
                    parent.togglestate('one')
                </handler>
    
                <text>One</text>
            </tabelement>
            
            <tabelement name="twotabelement" text="Tabelement Two">
                <handler name="onselected">
                    parent.togglestate('two')
                </handler>
                <text>Two</text>
            </tabelement>
            
            <tabelement name="threetabelement" text="Tabelement Three" selected="true">
                <handler name="onselected">
                    parent.togglestate('three')
                </handler>
                <text>Three</text>
            </tabelement>
    
        </tabslider>

        <!-- sample screen management with overlapping -->
        <view name="beforeview">
            <attribute name="toggledstate" type="string" />
            <attribute name="statepooling" type="boolean" value="true" />
    
            <handler name="ontoggledstate">
            <![CDATA[
                Debug.write("beforeview.ontoggledstate | toggledstate="+this.toggledstate);
    
                var arrPrefixes = ['one','two','three'];
                var theview = this.toggledstate+'view';
    
                for (var i = 0; i< arrPrefixes.length; i++){
                    var theprefix = arrPrefixes[i];
                    var v = theprefix+'view';
                    this[v].sendToBack();
                    
                    Debug.write("send to back state '"+v+"'");
                }
                this[theview].bringToFront();
                Debug.write("sent to front v '"+theview+"'");
            ]]>
            </handler>

            <testview name="oneview" y="${parent.testlabel.height + 10}" bgcolor="${canvas.bgcolor}" top_pad="0" />
            <testview name="twoview" y="${parent.testlabel.height + 10}" bgcolor="${canvas.bgcolor}" top_pad="50" />
            <testview name="threeview" y="${parent.testlabel.height + 10}" bgcolor="${canvas.bgcolor}" top_pad="100" />

            <text name="testlabel" text="BEFORE" fontstyle="bold" />
            <edittext y="50" name="myedittext3" text="hello1"  width="200"/>
            <edittext y="150" name="myedittext2" text="hello1"  width="200"/>
        </view>
    
        <!-- workaround screen management with state -->
        <view name="afterview">
            <attribute name="toggledstate" type="string" />
            <attribute name="statepooling" type="boolean" value="true" />
    
            <handler name="ontoggledstate">
            <![CDATA[
                Debug.write("afterview.ontoggledstate | toggledstate="+this.toggledstate);
    
                var arrPrefixes = ['one','two','three'];
                var thestate = this.toggledstate+'state';
    
                for (var i = 0; i< arrPrefixes.length; i++){
                    var theprefix = arrPrefixes[i];
                    var s = theprefix+'state';
                    this[s].remove();
                    
                    Debug.write("removed state '"+s+"'");
                }
                this[thestate].apply();
                Debug.write("applied state '"+thestate+"'");
            ]]>
            </handler> 


            <state name="onestate" apply="false" pooling="true">
                <testview y="${parent.testlabel.height + 10}" name="oneview" top_pad="0" bgcolor="${canvas.bgcolor}"/>
            </state>
    
            <state name="twostate" apply="false" pooling="true">
                <testview y="${parent.testlabel.height + 10}" name="twoview" top_pad="50" bgcolor="${canvas.bgcolor}"/>
            </state>
    
            <state name="threestate" apply="false" pooling="true">
                <testview y="${parent.testlabel.height + 10}" name="threeview" top_pad="100" bgcolor="${canvas.bgcolor}"/>
            </state>
            <text name="testlabel" text="AFTER" fontstyle="bold" />
        </view>
    </window>

</canvas>
