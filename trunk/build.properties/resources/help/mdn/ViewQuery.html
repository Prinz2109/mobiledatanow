<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
Views and Queries
</TITLE>
</HEAD>

<BODY BGCOLOR="#ffffff">

<a name="ViewQuery"><font size="+4">Views and Queries</font></a>
<p>
The <a href="#Views">Views</a> and <a href="#Query">Queries</a> screen allows
you to create and maintain Views and Queries for Mobile Data Now.
<p>
<img src="images/ViewQuery.gif">
<p>
The <a href="#Views">Views</a> are displayed in a tree with views grouped by the
<a href="DataStores.html">Data Stores</a> that they access. A view contains
<a href="#Query">queries</a> and <a href="#ViewFields">view fields</a>.

<p>
Double click on a data store or view to expand or collapse it in the tree.
<p>
The Views and Queries screen has the following buttons:<br>
<a href="#ViewWizardSplash">View Wizard</a><br>
<a href="#QueryWizardSplash">Query Wizard</a><br>
<a href="#DirectSql">Direct SQL</a><br>
<a href="#Delete">Delete</a><br>
<a href="#Properties">Properties</a><br>
<a href="#SetNaming">Set Naming</a><br>
<a href="#ExecuteQuery">Execute Query</a>

<p><br><a name="Views"><font size="+4">Views</font></a>
<p>
A View is a set of fields from
<a href="DataStores.html#Relationships">related</a> Data Store tables that can
be selected and presented to the mobile user. A View belongs to single Data Store
and a Data Store may contain many Views. The reason that we have Views instead of
just presenting the mobile user access to Data Store tables is so: (a) a View
may contain a subset of the fields from a single Data Store table or (b) a View
may contain fields from more than one
<a href="DataStores.html#Relationships">related</a> table and therefore hide
from the mobile user that data is coming from more than one table.
<p>
Note that it may be necessary for a view to contain all key fields from all the
entities used by the view. This is a requirement only if you wish the users to
be able to insert new records. This is because it is necessary to fill in the
key fields when inserting and if they are not present in the view the user
cannot fill in the values.
<br>
If the underlying database is using triggers or auto-number fields to generate
the keys then it is not necessary for them to be included in the view and if
they are fields that are generated by the database should be made read-only.

<p>
The figure above shows an example MDN system. At the top level the tree contains
the Data Stores available in this example MDN system. Beneath each Data Store are
the Views that have been created for that Data Store. Beneath the Views are
firstly the <a href="#Query">Queries</a> that belong to that View and then the
<a href="ViewFields">View Fields</a> that make up that View.

<p><br><a name="ViewWizardSplash"><font size="+3">View Wizard</font></a>
<p>
The View <a href="../fw/WizardPanel.html">Wizard</a> is used to create and
Maintain Views. Press the <b>View Wizard</b> button on the Maintain Views and
Queries screen to open the View Wizard.
<p>
<img src="images/ViewWizardSplash.gif">
<p>
You are able to choose to create a new View or update an existing View from the
initial View Wizard screen. The <i>update</i> option will only be available if
a view was selected when the <b>View Wizard</b> button was pressed.
<br>
Pressing <b>Next</b> takes you to the <i>View Properties</i> wizard panel.

<p><br><font size="+2">View Properties Wizard Panel</font>
<p>
<img src="images/ViewProperties.gif">
<p>
A View has a <b>Name</b> that uniquely identifies it within a Data Store.
When creating a new view you must also select the <b>Data Store</b> that the
View is to belongs to. When updating a view the data store cannot be changed.
<br>
Pressing <b>Next</b> takes you to the <i>View Fields</i> wizard panel.

<p><br><a name="ViewFields"><font size="+2">View Fields Wizard Panel</font></a>
<p>
<img src="images/ViewFields.gif">
<p>
This screen allows you to specify the fields that belong to a View. Choose an
entity (table) from the <b>Data Store Entity</b> combo box on the top-left of
the screen and the fields that belong to that entity will be displayed in the
<b>Available Fields</b> list below.
<p>
Select one or more fields from the <b>Available Fields</b> list and press the
<b>&gt;&gt;</b> button to add them to <b>Mapped Fields</b> list for this View.
You may repeat this operation for other tables to add fields from other tables
to the view. Note that if you add fields from multiple tables the tables should
be related (see the
<a href="DataStores.html#Relationships">Data Store Relationships screen</a>).
<p>
Similarly selecting a mapped field and pressing the <b>&lt;&lt;</b> button will
remove the mapping.
<p>
Selecting a mapped field and press the <b>Set Naming</b> button to mark the
selected field as a naming field. This has the same effect as using the
<b>Naming Field</b> check box in the
<a href="#ViewFieldProperties">View Field Properties</a> screen. The view field
icon will display a tick symbol when it has been selected as a naming field.
<p>
Pressing <b>Finish</b> will complete the update or creation of the View.

<p><br><a name="ViewProperties"><font size="+3">View Properties Screen</font></a>
<p>
You may edit the properties of a View by selecting it in the tree and clicking
the <b>Properties</b> button. This displays the view properties in an
<a href="../fw/MaintenancePanel.html#OKCancel">OK-Cancel</a> panel.
<p>
<img src="images/ViewPropertiesScreen.gif">
<p>
A View has a <b>Name</b> that uniquely identifies it for a Data Store.
The <b>Data Store</b> combo box define which Data Store the View belongs to.
This may not be changed once the view has been created.

<p><br><a name="ViewFieldProperties"><font size="+3">View Field Properties</font></a>
<p>
You may edit the properties of a View Field by selecting it in the tree and
Pressing the <b>Properties</b> button to display the field properties in an
<a href="../fw/MaintenancePanel.html#OKCancel">OK-Cancel</a> panel.
<p>
<img src="images/ViewFieldProperties.gif">
<p>
<b>Name</b> uniquely identifies the field within the View and is read-only.
<br>
<b>Description</b> allows you to enter a description for the field.
<br>
<b>Display Name</b> is the label that is shown before the field when displaying
the record to a mobile user. Due to screen size constraints it makes sense to
make this name as small as possible. It defaults to the Name of the field.
<br>
The <b>Naming Field</b> flag identifies the field (or fields, it is valid for a
view to have more than one naming field) that will be used to
name a record selected from this view. When the mobile user executes a query for
this View, the items in the list of records that is returned will be identified
by this or these naming fields.

<p><br><a name="Delete"><font size="+3">Delete View, Field, Query</font></a>
<p>
You may delete a View, Field or Query by selecting it in the tree and pressing
the <b>Delete</b> button.

<p><br><a name="Properties"><font size="+3">Properties</font></a>
<p>
Pressing the <b>Properties</b> button will display the appropriate properties
screen or wizard for the item currently selected in the tree.
<p>
If a View is selected the <a href="#ViewProperties">View Properties</a> screen
will be displayed.<br>
If a View Field is selected the
<a href="#ViewFieldProperties">View Field Properties</a> screen will be
displayed.<br>
If a Query is selected the <a href="#QueryWizardSplash">Query Wizard</a>
will be displayed.<br>

<p><br><a name="SetNaming"><font size="+3">Set Naming</font></a>
<p>
If a view field is selected pressing the <b>Set Naming</b> button will toggle
the naming status of the field. This has the same effect as using the
<b>Naming Field</b> check box in the
<a href="#ViewFieldProperties">View Field Properties</a> screen. The view field
icon will display a tick symbol when it has been selected as a naming field.

<p><br><a name="Query"><font size="+4">Queries</font></a>
<p>
A Query belongs to a View and selects records from that view based on
user-defined criteria. Queries may specify user-input, be sorted and also
grouped.
<p>
The figure at the <a href="#ViewQuery">top</a> of this page shows a list of
queries (yellow ? icon) belonging to the Contacts view of the Northwind Data
Store.

<p><br><a name="QueryWizardSplash"><font size="+3">Query Wizard</font></a>
<p>
The Query Wizard is used to create and maintain Queries. Press the
<b>Query Wizard</b> button in the <i>Maintain Views and Queries</i> screen to
display the Query Wizard.
<p>
<img src="images/QueryWizardSplash.gif">
<p>
You are able to choose to create a new Query or update an existing Query from
the initial Query Wizard screen. The <i>update</i> option is only available if
a query was selected in the tree.
<br>
Pressing <b>Next</b> takes you to the <i>Query Properties</i> wizard panel.

<p><br><a name="QueryProperties"><font size="+3">Query Properties Wizard Panel</font></a>
<p>
<img src="images/QueryProperties.gif">
<p>
A Query has a <b>Name</b> that uniquely identifies it within a View.
<br>
<b>Data Store</b> is the data store that this query will reference.
<br>
<b>Data View</b> is the view (within the above data store) that this query will
select from.
<br>
<b>Description</b> is any additional text to describe the function of the query.
<br>
Pressing <b>Next</b> takes you to the <i>Query Criteria</i> wizard panel.

<p><br><a name="QueryCriteria"><font size="+3">Query Criteria Wizard Panel</font></a>
<p>
<img src="images/QueryCriteria.gif">
<p>
This screen allows you to enter one or more criteria for the Query.
A Query with no criteria will select all records from its View. All criteria
for the query are displayed in the <b>Criteria</b> list, which will be empty if
there are no criteria.
<p>
A criterium has a field, an operator and a value. The field is selected from
the <b>Field</b> combo box at the top of the screen. This combo contains a list
of all the fields in the view.
<br>
The operator is selected from the <b>Operator</b> combo box. MDN supports many
operators, including <b>=</b>, <b>&gt;</b>, <b>&lt;</b> and <b>LIKE</b>.
<br>
The <b>Value</b> field allows you to enter a value for the criterium. You use
this to create criteria like: NAME = John, SALARY &gt; 100000, IQ &lt; 50 etc...
<br>
You are also able to specify that a user will input this value by selecting the
<b>User Input</b> radio button instead of the <b>Value</b> radio button. When
you are satisfied that your criterium is correct you add it to the list be
pressing the <b>Add</b> button. You may remove a criterium by selecting it in
the list and Pressing the <b>Remove</b> button.
<br>
Pressing <b>Next</b> takes you to the <i>Query Sorts</i> wizard panel.

<p><br><a name="QuerySorts"><font size="+3">Query Sorts Wizard Panel</font></a>
<p>
<img src="images/QuerySorts.gif">
<p>
This screen allows you to enter one or more Sorts for the Query.
A Query with no Sorts will order the result selection by no particular field,
i.e. the order is determined by the physical order of the records and the
characteristics of the source database.
<p>
A Sort has a <b>Field</b> and a direction. Sorting is alphabetical based on the field
that you have specified. An <b>Ascending</b> sort will sort from A-&gt;Z,
<b>Descending</b> from Z-&gt;A.
<br>
If you have more than one sort they are applied hierarchically. The first sort
is the primary one, and where there are several records with the same value for
the first sort field, they will be sorted on the second Sort field.
<br>
Pressing <b>Next</b> will take you to the <i>Query Grouping</i> wizard panel.

<p><br><a name="QueryGrouping"><font size="+3">Query Grouping Wizard Panel</font></a>
<p>
<img src="images/QueryGrouping.gif">
<p>
This screen allows you to group your Query by a field in the View. Select the
desired field in the <b>Group On</b> combo box or <b>&lt;&lt;None&gt;&gt;</b> if grouping is not required.
<p>
When the mobile user executes this Query it will show a unique list of the
values of the grouping field. When they click on one of these records it will
show them a list of the records that have that value in the grouping field.

<p><br><a name="DirectSql"><font size="+3">Direct SQL Query</font></a>
<p>
<img src="images/DirectSql.gif">
<p>
A Direct SQL Query is a free-form Query that may be created by the Database
Administrator and include more complex SQL than is supported by MDN Query Wizard.
<br>
You create a Direct SQL Query by selecting the Data Store that you wish to
query in the tree and Pressing the <b>Direct SQL</b> button. This opens the
Direct SQL Query screen shown above.
<br>
You must choose a <b>Query Name</b> for the Direct SQL and then type the query
you wish to execute in the <b>SQL Query</b> field. When you press the <b>Ok</b>
button the screen will close and create both a new View beneath the selected
Data Store and a New Query beneath the new view.

<p><br><a name="ExecuteQuery"><font size="+3">Execute Query</font></a>
<p>
You are able to execute a Query within MDN Administrator to verify that is
correct and examine the data that it retrieves.
<br>
To do this simply select the Query in the Maintain Views and Queries screen and
click the <b>Execute Query</b> button. The following screen will be displayed:
<p>
<img src="images/ExecuteQuery.gif">
<p>
To delete a record from this screen, select it in the table and click the
<b>Delete</b> button.
<p>

</BODY>

</HTML>

